<!Doctype html>
<html lang="pt-br">

<head>
    <meta name=" viewport" content=" width=device-width initial-scale=1.0">
    <meta charset="UTF-8">
    <link rel="stylesheet" href="./style.css" type="text/css">
    <script type="text/javascript" src="./scripts.js"></script>
    <title> Cadastro</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

<body style="height:100%; width:100%">
    <div style="display:flex; justify-content:center;align-items:center;">
        <form action="" method="POST" id="formcadastro" class="POST">
            <fieldset>
                <h2><u>POST</u></h2>

                <div class="formElement">
                    <label for="Nome" style="display:flex;clear:both">NOME: </label>
                    <input type="text" id="Nome" placeholder="Insira Seu Nome Completo: " />
                </div>

                <div class="formElement">
                    <label for="Senha" style="display:flex;clear:both">SENHA: </label>
                    <input type="password" id="Senha" placeholder="Insira sua Senha: " />
                </div>

                <div class="formElement">
                    <label for="Cep" style="display:flex;clear:both">CEP: </label>
                    <input type="text" id="Cep" maxlength="8" placeholder="Insira seu CEP: " />
                </div>
                <div class="formElement">
                    <label for="Endereço" style="display:flex;clear:both">ENDERECO: </label>
                    <input type="text" id="Endereco" placeholder="Insira seu Endereço: " />
                </div>
                <div class="formElement">
                    <label for="Bairro" style="display:flex;clear:both">BAIRRO: </label>
                    <input type="text" id="Bairro" placeholder="Insira eu Bairro: " />
                </div>
                <div class="formElement">
                    <label for="Estado" style="display:flex;clear:both">ESTADO: </label>
                    <input type="text" id="Estado" placeholder="Insira seu Estado: " />
                </div>
            </fieldset>
        </form>
        <br>

    </div>
    <div style="padding-top:25px"></div>
    <div style="display:flex; justify-content:center;align-items:center;">

        <button type="button" style="cursor:pointer" id="cadastro" onclick="submit()">Cadastre-se</a>
    </div>
    <br>
    <div style="padding-top:20px"></div>
    <div style="display:flex; justify-content:center;align-items:center;">
        <button type="button" style="cursor:pointer" onclick="">Voltar</button>
    </div>
    <div style="padding-top:25px"></div>

    <br>
    <script>
        function submit() {
            var registration = document.getElementById("formcadastro");
            registration.submit();
        }
        async function pesquisaEndereco(string) {
            var string = string.replace("-", "");
            var formatado = string.replace(/^(\d{5})(\d{3})*/, '$1-$2');
            cep.value = formatado;
            url = `https://viacep.com.br/ws/${string}/json/`;
            var http = new XMLHttpRequest();
            http.open("GET", url, true, "0");
            http.onreadystatechange = () => {

                if (http.readyState == 4 && http.status == 200) {
                    // console.log(http.responseText);
                    var objEndereco = JSON.parse(http.responseText);
                    document.getElementById("Endereco").value = objEndereco.logradouro;
                    document.getElementById("Bairro").value = objEndereco.bairro;
                    document.getElementById("Estado").value = objEndereco.uf;
                }
            };
            http.send();

        }
        var cep = document.getElementById("Cep");

        cep.addEventListener("change", async function () { await pesquisaEndereco(this.value) });

        // registration.addEventListener("click", function (e) {
        //     var form = document.getElementById("formcadastro");
        //     params = submitType(form);

        // });

        // var registration_get = document.getElementById("cadastroget");
        // registration_get.addEventListener("click", function (e) {
        //     var form = document.getElementById("formget");
        //     params = submitType(form);

        // });
    </script>
</body>

</html>